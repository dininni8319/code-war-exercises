const obj = {
    "success": true,
    "data": [
        {
            "clicks": 64,
            "ctr": 0.0065067100447336315,
            "impressions": 9836,
            "keys": [
                "2022-09-13"
            ],
            "position": 7.555307035380236
        },
        {
            "clicks": 49,
            "ctr": 0.00514814036562303,
            "impressions": 9518,
            "keys": [
                "2022-09-14"
            ],
            "position": 7.574595503256987
        },
        {
            "clicks": 38,
            "ctr": 0.0040720102871838835,
            "impressions": 9332,
            "keys": [
                "2022-09-15"
            ],
            "position": 8.540505786540933
        },
        {
            "clicks": 51,
            "ctr": 0.005672969966629589,
            "impressions": 8990,
            "keys": [
                "2022-09-16"
            ],
            "position": 7.558509454949944
        },
        {
            "clicks": 54,
            "ctr": 0.005544147843942505,
            "impressions": 9740,
            "keys": [
                "2022-09-17"
            ],
            "position": 11.503901437371663
        },
        {
            "clicks": 52,
            "ctr": 0.0053459442788115555,
            "impressions": 9727,
            "keys": [
                "2022-09-18"
            ],
            "position": 9.620746376066618
        },
        {
            "clicks": 39,
            "ctr": 0.004752620034121375,
            "impressions": 8206,
            "keys": [
                "2022-09-19"
            ],
            "position": 8.878869120155983
        },
        {
            "clicks": 49,
            "ctr": 0.0057626719981183116,
            "impressions": 8503,
            "keys": [
                "2022-09-20"
            ],
            "position": 8.244619546042573
        },
        {
            "clicks": 51,
            "ctr": 0.006919006919006919,
            "impressions": 7371,
            "keys": [
                "2022-09-21"
            ],
            "position": 8.088590421923755
        },
        {
            "clicks": 66,
            "ctr": 0.008391608391608392,
            "impressions": 7865,
            "keys": [
                "2022-09-22"
            ],
            "position": 9.287730451366816
        },
        {
            "clicks": 52,
            "ctr": 0.0074360074360074364,
            "impressions": 6993,
            "keys": [
                "2022-09-23"
            ],
            "position": 8.623480623480624
        },
        {
            "clicks": 50,
            "ctr": 0.007125552230297848,
            "impressions": 7017,
            "keys": [
                "2022-09-24"
            ],
            "position": 10.712555223029785
        },
        {
            "clicks": 44,
            "ctr": 0.005778069599474721,
            "impressions": 7615,
            "keys": [
                "2022-09-25"
            ],
            "position": 8.412475377544322
        },
        {
            "clicks": 45,
            "ctr": 0.007063255375922148,
            "impressions": 6371,
            "keys": [
                "2022-09-26"
            ],
            "position": 9.837231203892639
        },
        {
            "clicks": 44,
            "ctr": 0.006582884500299222,
            "impressions": 6684,
            "keys": [
                "2022-09-27"
            ],
            "position": 9.063734290843806
        },
        {
            "clicks": 48,
            "ctr": 0.007347313638450942,
            "impressions": 6533,
            "keys": [
                "2022-09-28"
            ],
            "position": 9.144497168222868
        },
        {
            "clicks": 42,
            "ctr": 0.006125127606825142,
            "impressions": 6857,
            "keys": [
                "2022-09-29"
            ],
            "position": 9.970832725681785
        },
        {
            "clicks": 39,
            "ctr": 0.005506918949449308,
            "impressions": 7082,
            "keys": [
                "2022-09-30"
            ],
            "position": 10.543914148545609
        },
        {
            "clicks": 24,
            "ctr": 0.0032854209445585215,
            "impressions": 7305,
            "keys": [
                "2022-10-01"
            ],
            "position": 13.752224503764545
        },
        {
            "clicks": 24,
            "ctr": 0.0035087719298245615,
            "impressions": 6840,
            "keys": [
                "2022-10-02"
            ],
            "position": 11.769590643274853
        },
        {
            "clicks": 52,
            "ctr": 0.008181246066708621,
            "impressions": 6356,
            "keys": [
                "2022-10-03"
            ],
            "position": 9.75645059786029
        },
        {
            "clicks": 39,
            "ctr": 0.006775538568450313,
            "impressions": 5756,
            "keys": [
                "2022-10-04"
            ],
            "position": 10.320708825573314
        },
        {
            "clicks": 33,
            "ctr": 0.005152224824355972,
            "impressions": 6405,
            "keys": [
                "2022-10-05"
            ],
            "position": 11.892271662763466
        },
        {
            "clicks": 52,
            "ctr": 0.00790874524714829,
            "impressions": 6575,
            "keys": [
                "2022-10-06"
            ],
            "position": 10.597414448669202
        },
        {
            "clicks": 30,
            "ctr": 0.004547521600727604,
            "impressions": 6597,
            "keys": [
                "2022-10-07"
            ],
            "position": 11.658026375625285
        },
        {
            "clicks": 44,
            "ctr": 0.006448776198153305,
            "impressions": 6823,
            "keys": [
                "2022-10-08"
            ],
            "position": 14.234647515755533
        },
        {
            "clicks": 58,
            "ctr": 0.007673987827467584,
            "impressions": 7558,
            "keys": [
                "2022-10-09"
            ],
            "position": 9.837126223868749
        },
        {
            "clicks": 41,
            "ctr": 0.005606454259537809,
            "impressions": 7313,
            "keys": [
                "2022-10-10"
            ],
            "position": 10.654450977710926
        },
        {
            "clicks": 52,
            "ctr": 0.007912355447352405,
            "impressions": 6572,
            "keys": [
                "2022-10-11"
            ],
            "position": 12.679397443700548
        },
        {
            "clicks": 44,
            "ctr": 0.0069952305246422895,
            "impressions": 6290,
            "keys": [
                "2022-10-12"
            ],
            "position": 10.2577106518283
        },
        {
            "clicks": 42,
            "ctr": 0.006376195536663124,
            "impressions": 6587,
            "keys": [
                "2022-10-13"
            ],
            "position": 9.936845301351147
        },
        {
            "clicks": 33,
            "ctr": 0.0054419525065963065,
            "impressions": 6064,
            "keys": [
                "2022-10-14"
            ],
            "position": 9.87401055408971
        },
        {
            "clicks": 38,
            "ctr": 0.005116466944930658,
            "impressions": 7427,
            "keys": [
                "2022-10-15"
            ],
            "position": 13.796553117005521
        },
        {
            "clicks": 46,
            "ctr": 0.00623475196530225,
            "impressions": 7378,
            "keys": [
                "2022-10-16"
            ],
            "position": 11.379371103280022
        },
        {
            "clicks": 53,
            "ctr": 0.007272228320526894,
            "impressions": 7288,
            "keys": [
                "2022-10-17"
            ],
            "position": 13.691547749725576
        },
        {
            "clicks": 56,
            "ctr": 0.007163873608801331,
            "impressions": 7817,
            "keys": [
                "2022-10-18"
            ],
            "position": 13.985160547524625
        },
        {
            "clicks": 49,
            "ctr": 0.0063685989082401875,
            "impressions": 7694,
            "keys": [
                "2022-10-19"
            ],
            "position": 11.936184039511307
        },
        {
            "clicks": 56,
            "ctr": 0.007507708808151227,
            "impressions": 7459,
            "keys": [
                "2022-10-20"
            ],
            "position": 12.46748893953613
        },
        {
            "clicks": 50,
            "ctr": 0.006614631565021828,
            "impressions": 7559,
            "keys": [
                "2022-10-21"
            ],
            "position": 10.933192221193279
        },
        {
            "clicks": 46,
            "ctr": 0.006010714752384686,
            "impressions": 7653,
            "keys": [
                "2022-10-22"
            ],
            "position": 13.881615052920424
        },
        {
            "clicks": 53,
            "ctr": 0.006767109295199183,
            "impressions": 7832,
            "keys": [
                "2022-10-23"
            ],
            "position": 10.261874361593463
        },
        {
            "clicks": 64,
            "ctr": 0.00897489833122984,
            "impressions": 7131,
            "keys": [
                "2022-10-24"
            ],
            "position": 11.567662319450287
        },
        {
            "clicks": 57,
            "ctr": 0.00797649034424853,
            "impressions": 7146,
            "keys": [
                "2022-10-25"
            ],
            "position": 11.988944864259725
        },
        {
            "clicks": 37,
            "ctr": 0.0051338975995559874,
            "impressions": 7207,
            "keys": [
                "2022-10-26"
            ],
            "position": 11.957957541279312
        },
        {
            "clicks": 48,
            "ctr": 0.0065717415115005475,
            "impressions": 7304,
            "keys": [
                "2022-10-27"
            ],
            "position": 11.579545454545455
        },
        {
            "clicks": 49,
            "ctr": 0.006953313466723428,
            "impressions": 7047,
            "keys": [
                "2022-10-28"
            ],
            "position": 11.769405420746416
        },
        {
            "clicks": 49,
            "ctr": 0.005349344978165939,
            "impressions": 9160,
            "keys": [
                "2022-10-29"
            ],
            "position": 13.051965065502184
        },
        {
            "clicks": 57,
            "ctr": 0.006713780918727915,
            "impressions": 8490,
            "keys": [
                "2022-10-30"
            ],
            "position": 10.943345111896349
        },
        {
            "clicks": 42,
            "ctr": 0.005518328734726055,
            "impressions": 7611,
            "keys": [
                "2022-10-31"
            ],
            "position": 11.2313756405203
        },
        {
            "clicks": 45,
            "ctr": 0.004566673432108788,
            "impressions": 9854,
            "keys": [
                "2022-11-01"
            ],
            "position": 14.750761112238685
        },
        {
            "clicks": 55,
            "ctr": 0.00809895449860109,
            "impressions": 6791,
            "keys": [
                "2022-11-02"
            ],
            "position": 12.160653806508614
        },
        {
            "clicks": 42,
            "ctr": 0.006075509908867351,
            "impressions": 6913,
            "keys": [
                "2022-11-03"
            ],
            "position": 11.79256473311153
        },
        {
            "clicks": 36,
            "ctr": 0.005210594876248371,
            "impressions": 6909,
            "keys": [
                "2022-11-04"
            ],
            "position": 15.043132146475612
        },
        {
            "clicks": 36,
            "ctr": 0.005291783036895487,
            "impressions": 6803,
            "keys": [
                "2022-11-05"
            ],
            "position": 15.075554902249008
        },
        {
            "clicks": 46,
            "ctr": 0.00636766334440753,
            "impressions": 7224,
            "keys": [
                "2022-11-06"
            ],
            "position": 12.97452934662237
        },
        {
            "clicks": 23,
            "ctr": 0.0034922563012450654,
            "impressions": 6586,
            "keys": [
                "2022-11-07"
            ],
            "position": 14.540236866079562
        },
        {
            "clicks": 37,
            "ctr": 0.004965776405851563,
            "impressions": 7451,
            "keys": [
                "2022-11-08"
            ],
            "position": 12.958797476848746
        },
        {
            "clicks": 48,
            "ctr": 0.006881720430107527,
            "impressions": 6975,
            "keys": [
                "2022-11-09"
            ],
            "position": 14.03225806451613
        },
        {
            "clicks": 48,
            "ctr": 0.006977758395115569,
            "impressions": 6879,
            "keys": [
                "2022-11-10"
            ],
            "position": 13.431603430731212
        },
        {
            "clicks": 51,
            "ctr": 0.007552199022656597,
            "impressions": 6753,
            "keys": [
                "2022-11-11"
            ],
            "position": 13.710202872797275
        },
        {
            "clicks": 37,
            "ctr": 0.005496137849079026,
            "impressions": 6732,
            "keys": [
                "2022-11-12"
            ],
            "position": 16.28104575163399
        },
        {
            "clicks": 31,
            "ctr": 0.004443170417084707,
            "impressions": 6977,
            "keys": [
                "2022-11-13"
            ],
            "position": 12.490612010892933
        },
        {
            "clicks": 52,
            "ctr": 0.008165829145728644,
            "impressions": 6368,
            "keys": [
                "2022-11-14"
            ],
            "position": 13.809516331658292
        },
        {
            "clicks": 41,
            "ctr": 0.006808369312520757,
            "impressions": 6022,
            "keys": [
                "2022-11-15"
            ],
            "position": 16.790601129192957
        },
        {
            "clicks": 47,
            "ctr": 0.007758336084516342,
            "impressions": 6058,
            "keys": [
                "2022-11-16"
            ],
            "position": 14.987124463519313
        },
        {
            "clicks": 48,
            "ctr": 0.008687782805429865,
            "impressions": 5525,
            "keys": [
                "2022-11-17"
            ],
            "position": 14.568868778280542
        },
        {
            "clicks": 45,
            "ctr": 0.008411214953271028,
            "impressions": 5350,
            "keys": [
                "2022-11-18"
            ],
            "position": 13.793831775700935
        },
        {
            "clicks": 38,
            "ctr": 0.006212195520680072,
            "impressions": 6117,
            "keys": [
                "2022-11-19"
            ],
            "position": 17.850416871015202
        },
        {
            "clicks": 39,
            "ctr": 0.0066643882433356115,
            "impressions": 5852,
            "keys": [
                "2022-11-20"
            ],
            "position": 13.065618591934381
        },
        {
            "clicks": 45,
            "ctr": 0.007204610951008645,
            "impressions": 6246,
            "keys": [
                "2022-11-21"
            ],
            "position": 13.967979506884406
        },
        {
            "clicks": 45,
            "ctr": 0.007564296520423601,
            "impressions": 5949,
            "keys": [
                "2022-11-22"
            ],
            "position": 13.569843671205245
        },
        {
            "clicks": 46,
            "ctr": 0.008509064002959674,
            "impressions": 5406,
            "keys": [
                "2022-11-23"
            ],
            "position": 14.35072142064373
        },
        {
            "clicks": 36,
            "ctr": 0.006825938566552901,
            "impressions": 5274,
            "keys": [
                "2022-11-24"
            ],
            "position": 14.38832006067501
        },
        {
            "clicks": 28,
            "ctr": 0.00522875816993464,
            "impressions": 5355,
            "keys": [
                "2022-11-25"
            ],
            "position": 14.079365079365079
        },
        {
            "clicks": 48,
            "ctr": 0.00700218818380744,
            "impressions": 6855,
            "keys": [
                "2022-11-26"
            ],
            "position": 17.045951859956237
        },
        {
            "clicks": 48,
            "ctr": 0.006858122588941277,
            "impressions": 6999,
            "keys": [
                "2022-11-27"
            ],
            "position": 13.36876696670953
        },
        {
            "clicks": 45,
            "ctr": 0.008161044613710556,
            "impressions": 5514,
            "keys": [
                "2022-11-28"
            ],
            "position": 13.931628581791802
        },
        {
            "clicks": 39,
            "ctr": 0.00585234093637455,
            "impressions": 6664,
            "keys": [
                "2022-11-29"
            ],
            "position": 12.953931572629052
        },
        {
            "clicks": 36,
            "ctr": 0.006270684549730012,
            "impressions": 5741,
            "keys": [
                "2022-11-30"
            ],
            "position": 14.111653022121581
        },
        {
            "clicks": 39,
            "ctr": 0.006123410268487989,
            "impressions": 6369,
            "keys": [
                "2022-12-01"
            ],
            "position": 21.81598367090595
        },
        {
            "clicks": 38,
            "ctr": 0.007374345041723268,
            "impressions": 5153,
            "keys": [
                "2022-12-02"
            ],
            "position": 14.680768484378032
        },
        {
            "clicks": 46,
            "ctr": 0.0068544181195052895,
            "impressions": 6711,
            "keys": [
                "2022-12-03"
            ],
            "position": 16.61406645805394
        },
        {
            "clicks": 71,
            "ctr": 0.007996395990539475,
            "impressions": 8879,
            "keys": [
                "2022-12-04"
            ],
            "position": 10.831399932424823
        },
        {
            "clicks": 44,
            "ctr": 0.007232084155161078,
            "impressions": 6084,
            "keys": [
                "2022-12-05"
            ],
            "position": 14.063938198553583
        },
        {
            "clicks": 50,
            "ctr": 0.00829324929507381,
            "impressions": 6029,
            "keys": [
                "2022-12-06"
            ],
            "position": 17.73494775252944
        },
        {
            "clicks": 36,
            "ctr": 0.00641254007837549,
            "impressions": 5614,
            "keys": [
                "2022-12-07"
            ],
            "position": 13.641966512290702
        },
        {
            "clicks": 56,
            "ctr": 0.00809950824414232,
            "impressions": 6914,
            "keys": [
                "2022-12-08"
            ],
            "position": 11.249927682962106
        },
        {
            "clicks": 59,
            "ctr": 0.008663729809104258,
            "impressions": 6810,
            "keys": [
                "2022-12-09"
            ],
            "position": 12.200146842878121
        },
        {
            "clicks": 44,
            "ctr": 0.0062651288623095545,
            "impressions": 7023,
            "keys": [
                "2022-12-10"
            ],
            "position": 16.702691157624947
        }
    ],
    "performance": {
        "clicks": 4039,
        "impressions": 626212,
        "position": 12.384472910867574,
        "ctr": 0
    },
    "count": 89,
    "message": "Questi sono i siti trovati"
}


function perCent(num) {
    return (num * 100).toFixed(2);
}

function getClicks(data, allowData) {
  let arr = [];
  const allowed = [allowData];
  for (let i = 0; i < data?.length; i++) {
    const el = data[i];

    const filtered = Object.keys(el)
    .filter(key => allowed.includes(key))
    .reduce((arr, key) => {
       
     if (allowed[0] === 'keys') {
         arr = el[key].concat(arr);
        } else if (allowed[0] === 'ctr') {
        let ctr = perCent(el[key]);

        arr = [ctr].concat(arr);
        
      }  else if (allowed[0] === 'position') {
        let position = (el[key]).toFixed(2);

        arr = [position].concat(arr);
        
      } else {
        arr = [el[key]].concat(arr);
     }
      return arr;
    }, []);
    arr = arr.concat(filtered);
  }
  
  return arr;
}



console.log(getClicks(obj.data, 'position'), 'testing the clicks');